# 实验报告
## 实验目的
利用已有的模型，实现对股票未来价格的预测
## 实验数据
实验的数据利用baostock下载得到，每条数据包括该股票的过去二十日的数据（包括股票的收盘价，开盘价，最高价，最低价，成交量，换手率以及涨跌幅）
对于涨幅超过0的将其标签设为1，反之为0
对于训练集，每个标签下有325个样本
对于测试集，每个标签下有75个样本
## gb
首先调整learning_rate
| learning_rate | 0.1 | 0.2 |0.3| 0.4| 0.5 | 0.6 |0.7| 0.8| 0.9 | 1|
| :--------:    | :----:| :---: | :---: |:----: |:----:| :-----: | :----: |:----: | :----: |:----: |
| ac率 | 0.5733 |0.54|0.5533| 0.5067| 0.4467|0.52|0.54| 0.5133|0.54| 0.5067|

将 learning_rate设定为0.1 

对n_estimators 进行调参 
|n_estimators  | 10 | 20 |30| 40| 50 | 60 |70| 80| 90 | 100|
| :--------:    | :----:| :---: | :---: |:----: |:----:| :-----: | :----: |:----: | :----: |:----: |
| ac率 | 0.5667 |0.56|0.5333| 0.5467| 0.5733|0.6067|0.5733| 0.6|0.5533| 0.5667|

n_estimators = 60时较好

开始对决策树进行调参。首先对决策树最大深度max_depth进行网格搜索

|max_depth  | 1 | 2 |3| 4| 5 | 6 |7| 8| 9 | 10|
| :--------:    | :----:| :---: | :---: |:----: |:----:| :-----: | :----: |:----: | :----: |:----: |
| ac率 | 0.5667 |0.5467|0.6| 0.6067| 0.5733|0.56|0.6| 0.5467|0.5667| 0.4867|

当max_depth = 4时较好

| learning_rate | n_estimators | max_depth |random_state| ac率|
| :--------:    | :-----------:| :-------: | :-------: |:-------: |
| 0.1 | 60 |4|0| 0.6|

## RandomForest
首先对n_estimators进行调整， 80左右时准确率较高 ，对80——90进行测试，发现在85时准确率最高

对n_estimators 进行调参 数据如下
|n_estimators  | 30 | 40 |50| 60| 70 | 80 |90| 100| 110 | 120|
| :--------:    | :----:| :---: | :---: |:----: |:----:| :-----: | :----: |:----: | :----: |:----: |
| ac率 | 0.58 |0.58|0.56| 0.5867| 0.5933|0.6133|0.5933| 0.62|0.6133| 0.6067|

|n_estimators  | 80 | 81 |82| 83| 84 | 85 |86| 87| 88 | 89|
| :--------:    | :----:| :---: | :---: |:----: |:----:| :-----: | :----: |:----: | :----: |:----: |
| ac率 | 0.6133 |0.6267|0.62| 0.6067| 0.6267|0.6333|0.6267| 0.6|0.6067| 0.5933|

下来对max_depth进行调参，7时准确率较高。
|max_depth  | 1 | 2 |3| 4| 5 | 6 |7| 8| 9 | 10|
| :--------:    | :----:| :---: | :---: |:----: |:----:| :-----: | :----: |:----: | :----: |:----: |
| ac率 | 0.5667 |0.5533|0.5667| 0.6067| 0.5867|0.58|0.64| 0.6|0.6| 0.5667|

此时 准确率在0.64左右。
| n_estimators | max_depth |random_state| ac率|
| :-----------:| :-------: | :-------: |:-------: |
| 85 |7|90| 0.64|

## XGBOOST
对n_estimators 进行调参 数据如下
|n_estimators  | 200 | 210 |220| 230| 240 | 250 |260| 270| 280 | 290|
| :--------:    | :----:| :---: | :---: |:----: |:----:| :-----: | :----: |:----: | :----: |:----: |
| ac率 | 0.5667|0.5467|0.5533| 0.56| 0.56|0.5533|0.5667| 0.5733|0.58| 0.58|

接下来对max——depth进行调参，当其为3时准确率在0.58左右
|max_depth  | 1 | 2 |3| 4| 5 | 6 |7| 8| 9 |
| :--------:    | :----:| :---: | :---: |:----: |:----:| :-----: | :----: |:----: | :----: |
| ac率 | 0.5067 |0.54|0.56| 0.5733| 0.58|0.54|0.5667| 0.4933|0.5533|

| n_estimators | max_depth | ac率|
| :-----------:| :-------: |:-------: |
| 280 |5| 0.58|
